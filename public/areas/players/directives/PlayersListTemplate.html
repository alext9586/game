<div class="col-xs-12">
	<uib-alert ng-repeat="alert in ctrl.alerts" type="{{alert.type}}" close="ctrl.closeAlert($index)">{{alert.msg}}</uib-alert>

	<div ng-show="ctrl.showError">
		<div class="btn-row">
			<button type="button" class="btn btn-success btn-block btn-lg" ng-click="ctrl.reload()">
				<span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Reload
			</button>
		</div>
	</div>
    
    <load-spinner ng-show="ctrl.showLoading"></load-spinner>

	<div class="player-selector-container" ng-show="ctrl.showPlayers">
		<text-input
			name="nameFilter"
			placeholder="Filter by player name"
			value="ctrl.filter"
			show-clear-btn="true">
		</text-input>
	</div>
</div>

<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3" ng-repeat="player in ctrl.players | filter:ctrl.filter" ng-show="ctrl.showPlayers">
	<div class="player-card players-list-card">
		<player-nametag player="player"></player-nametag>
		<div>ID: {{player._id}}</div>
		<div class="edit-player-btn">
			<button type="button" class="btn btn-warning" ng-click="ctrl.editPlayer(player)" aria-label="Edit Game">
				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit
			</button>
		</div>

		<div class="edit-player-btn">
			<button type="button"
				class="btn"
				ng-class="{'btn-default': player.inactive, 'btn-success': !player.inactive}"
				ng-click="ctrl.toggleInactive(player)"
				aria-label="Inactive">
				<span class="glyphicon"
					ng-class="{'glyphicon-eye-open': !player.inactive, 'glyphicon-eye-close': player.inactive}"
					aria-hidden="true"></span> {{player.inactive ? "Inactive" : "Active"}}
			</button>
		</div>
	</div>
</div>

<form ng-submit="ctrl.save()" ng-show="ctrl.showPlayerEdit">
	<div class="status-banner">
		<player-form player="ctrl.selectedPlayer" disable-form="ctrl.disableControls"></player-form>
		<div class="form-group">
			<text-input name="duplicatePlayerId"
				placeholder="Duplicate Player Id (Optional)"
				value="ctrl.selectedPlayer.duplicate"
				disabled="ctrl.disableForm">
			</text-input>
		</form>
	</div>

	<div class="btn-row">
		<div class="btn-group btn-group-justified" role="group">
			<div class="btn-group" role="group">
				<button type="button" class="btn btn-primary btn-lg" ng-click="ctrl.cancelEdit()" ng-disabled="ctrl.disableControls" aria-label="Cancel Edit">
					<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Cancel
				</button>
			</div>
			<div class="btn-group" role="group">
				<button type="submit" class="btn btn-success btn-lg" ng-disabled="ctrl.disableControls" aria-label="Save Player">
					<span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Save
				</button>
			</div>
		</div>
	</div>
</form>